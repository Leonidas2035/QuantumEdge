Поетапний план створення Supervisor агента (під QuantumEdge)
Етап 0. Каркас і точка запуску

Ціль: мати один центр управління.

Створити проект C:\SupervisorAgent з:

supervisor.py — main,

config/paths.yaml — де лежать QuantumEdge, Meta-Agent, логи.

Supervisor поки що:

уміє запускати / зупиняти QuantumEdge як окремий процес;

читає базовий конфіг (режим: paper / demo / off).

Етап 1. Process & Health Manager

Ціль: ніколи не втратити контроль над ботом.

ProcessManager

Запуск: python run_bot.py --mode=paper/demo.

Перевірка, що не запущено два рази.

Перезапуск при падінні (з лімітом спроб).

Health / heartbeat

В QuantumEdge додати простий heartbeat (локальний сокет / HTTP):

надсилає: uptime, PnL, active positions, останній тик.

Supervisor слухає й:

якщо немає heartbeat > N секунд → «бот завис», kill + restart або halt.

Етап 2. Risk Engine (глобальний, над ботом)

Ціль: глобальні стоп-рівні, незалежно від того, що думає бот.

Конфіг risk.yaml

max_daily_loss (% або USDT),

max_drawdown,

max_notional_per_symbol,

max_leverage.

Перехоплення ордерів

Зробити проксі: QuantumEdge не шле ордери прямо на біржу.

QuantumEdge → Supervisor.can_execute(order_request).

Supervisor:

перевіряє ліміти,

рахує поточний PnL і exposure,

повертає ALLOW / DENY + reason.

Auto-halt

Якщо daily loss > ліміту — Supervisor:

блокує всі нові ордери,

дає команду QuantumEdge закрити позиції (або ставить прапор «manual close needed»).

Етап 3. Журналювання й аудити

Ціль: бачити, що і чому сталося.

Єдиний лог-формат

Supervisor пише структуровані події:

ордери (request/allow/deny),

зміни режиму,

аномалії (latency, errors),

запуски/зупинки бота.

Audit trail

Кожен день зберігати:

PnL summary,

скільки угод, який winrate,

які ліміти спрацювали.

Meta-Agent інтеграція (ще не AI-супервізор, а dev-tool)

Supervisor може сформувати задачу:

«проаналізуй логи за день»,

«зроби звіт по risk-engine».

Кидає .md у Meta-Agent → отримує звіт.

Етап 4. LLM-супервізор (AI-нагляд)

Ціль: мати «розумного чергового офіцера».

LLM Risk Moderator

Supervisor періодично формує компактний summary:

останні N угод,

режим ринку,

поточний risk state.

Відправляє це невеликою промптою до LLM:

«чи варто продовжувати торгувати за цієї поведінки?»

Можливі відповіді:

OK,

знизити ризик,

зробити паузу / перейти в paper.

Правила довіри

LLM не може сам змінювати ключі / конфіги.

Він лише радить, Supervisor застосовує тільки дозволені дії:

змінити підмножину параметрів (наприклад, risk_multiplier),

перевести режим з demo → paper.

Етап 5. Стратегічний AI-агент (Meta-рівень)

Ціль: автоматична робота над якістю бота.

Регулярні off-market задачі через Meta-Agent

Щодня/щотижня:

audit коду,

пропозиції по новим фічам,

re-трейн моделей на нових даних (з людським approve).

Supervisor керує Meta-Agent

Генерує task-файли (S1ai_scalper_bot.md),

Запускає meta_agent.py,

Збирає результати,

Пропонує тобі «кандидатні» зміни (нові стратегії, ризик-правила).